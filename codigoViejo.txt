listProductHtml.addEventListener("click", (event) => {
  let positionClick = event.target;

  if (positionClick.classList.contains('btn-add')) {
    
    let postre_id = positionClick.parentElement.dataset.id;

    agregarAlCarrito(postre_id);
  }

  let btnContainer = positionClick.closest(".itemProduct");
  let btn = btnContainer.querySelector(".btn");

  if (positionClick.parentElement.dataset.id) {
    cardTab.style.display = "block";
    positionClick.style.display = "none";
    btn.style.display = "block";
    btn.style.display = "flex";
  }
});

const agregarAlCarrito = (postre_id) => {
 
  let positionThisProductInCart = cart.findIndex((value) => value.postre_id == postre_id);
  if(cart.length <= 0){
      cart = [{
          product_id: postre_id,
          quantity: 1
      }];
  }else if(positionThisProductInCart < 0){
      cart.push({
          product_id: postre_id,
          quantity: 1
      });
  }else{
      cart[positionThisProductInCart].quantity = cart[positionThisProductInCart].quantity + 1;
  }

  addCartToHtml();
  
};

const addCartToHtml = () => {

  if (cart.length > 0) {
    listCart.innerHTML = '';
    cart.forEach((cart) => {   
      let nuevoCarrito = document.createElement("div");
      nuevoCarrito.classList.add("postre", "flex", "justify-between");
      
      nuevoCarrito.innerHTML = `<div class="listCartInfo my-3">
                        <h2 class="font-title my-3 text-lg"></h2>
                        <h3 class="font-text-md">Quantity: <span class="text-orange-600 font-text-md">1x</span></h3>
                        <p class="font-text-md my-3 text-md">Price </p>
    
                    </div>
                    <div class="btnCloseContainer my-3">
                        <button class="btn-close">
                            <img class="w-4 mt-5" src="/assets/images/icon-remove-item.svg" alt="">
                        </button>
                    </div>`;

      listCart.appendChild(nuevoCarrito);
    });
  }
  
};